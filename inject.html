<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    

    <!-- Pixiv x Cloudinary -->
    <script>
        const GetElementArtist  = document.querySelector('.sc-d98f2c-0.sc-cwiweh').textContent;
        const GetElementImage   = document.querySelectorAll('.sc-1qpw8k9-1.jOmqKq');
        const GetElementTitle   = document.querySelector('.sc-1u8nu73-3.lfwBiP').textContent;
        const GetElementTag     = document.querySelectorAll("ul.gZfuPH a");
        const GetElementCode    = document.querySelector('.eStCAU');
        const GetData           = new Date();

        const ArrayTag          = Array.from(GetElementTag);
        const ArrayImage        = Array.from(GetElementImage, img => img.getAttribute('src').split('/').pop().replace('.jpg', ''));
        
        const FilterTag         = ArrayTag.filter((link) => !link.classList.contains("gtm-new-work-tag-event-click"));
        const FilterDate        = GetData.toISOString();
        
        const DataSlug          = btoa(unescape(encodeURIComponent(GetElementTitle)));
        const DataTag           = FilterTag.map((link) => link.textContent);
        const DataCover         = `https://res.cloudinary.com/dvdute5j8/image/upload/c_scale,w_240/Nsfw/${GetElementArtist}/${ArrayImage[0]}.webp`;
        const DataImage         = Array.from(ArrayImage, doc => `https://res.cloudinary.com/dvdute5j8/image/upload/Nsfw/${GetElementArtist}/${doc}.webp`)
        


        const NewElement = `
            <div style="padding:10px;">
                <p>Full Data</p>
                <textarea style="width: -webkit-fill-available;height: 400px; border: none; border-radius: 5px; background: #4c4c4c;padding: 10px; color:white; margin-bottom:20px">
                    {
                        "Type"   : "nsfw",
                        "Artist" : "${GetElementArtist}",
                        "Post"   : [
                            {
                                "Title"     : "${GetElementTitle}",
                                "Slug"      : "${btoa(unescape(encodeURIComponent(FilterDate)))}",
                                "Tag"       : [${DataTag.map(doc => `"${doc}"` )}],
                                "Cover"     : "${DataCover}",
                                "Image"     : [${DataImage.map(doc => `"${doc}"` )}],
                                "Uploaded"  : "${FilterDate.slice(0, 10)}"
                            }
                        ]
                    }
                </textarea>
            </div>
        `;

        GetElementCode.innerHTML += NewElement;
    </script>


</body>
</html>